<html>
  <head>
  </head>
  <body>
      <cast-media-player id="player"></cast-media-player>
      <style>
        #player {
            --theme-hue: 210;
            --progress-color: rgb(0, 255, 0);
            --splash-image: url('splash.JPG');
        }
      </style>
          <script type="text/javascript"
          src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js">
    </script>
    <script>

      const context = cast.framework.CastReceiverContext.getInstance();
      const playerManager = context.getPlayerManager();

      // listen to all Core Events
      playerManager.addEventListener(cast.framework.events.category.CORE,
        event => {
            console.log('EVENT: ' + event);
        });

      playerManager.addEventListener(
        cast.framework.events.EventType.PLAYER_LOAD_COMPLETE, () => {
        const audioTracksManager = playerManager.getAudioTracksManager();
        const textTracksManager = playerManager.getTextTracksManager();

        // Get all audio tracks
        const audioTracks = audioTracksManager.getTracks();

        // Get all text tracks
        const textTracks = textTracksManager.getTracks();

        // Choose the first audio track to be active by specifying its ID
        console.log("AUDIO TRACK tracks[0].trackId"+audioTracks[0].trackId);
        audioTracksManager.setActiveById(audioTracks[0].trackId);

        // Choose the first text track to be active by its ID
        console.log("TEXT TRACK tracks[0].trackId"+textTracks[0].trackId);
        textTracksManager.setActiveByIds([textTracks[0].trackId]);
      });

      const DemoQueue = class extends cast.framework.QueueBase {
        constructor() {
        /** @private {} */
        super();
        YourServer.onSomeEvent = this.updateEntireQueue_;
      }

      /**
      * Initializes the queue.
      * @param {!cast.framework.messages.LoadRequestData} loadRequestData
      * @return {!cast.framework.messages.QueueData}
      */
      initialize(loadRequestData) {
        // Put the first set of items into the queue
        const items = this.nextItems();
        const queueData =
        loadRequestData.queueData || new cast.framework.messages.QueueData();
        queueData.name = 'Your Playlist';
        queueData.description = 'Your Playlist Description';
        queueData.items = items;
        return queueData;
      }

      /**
      * Picks a set of items from remote server after the reference item id and
      * return as the next items to be inserted into the queue. When
      * referenceItemId is omitted, items are simply appended to the end of the
      * queue.
      * @param {number} referenceItemId
      * @return {!Array<cast.framework.QueueItem>}
      */
    nextItems(referenceItemId) {
      // Assume your media has a itemId and the media url
      return this.constructQueueList_(YourServer.getNextMedias(referenceItemId));
    }

    /**
      * Picks a set of items from remote server before the reference item id and
      * return as the items to be inserted into the queue. When
      * referenceItemId is omitted, items are simply appended to beginning of the
      * queue.
      * @param {number} referenceItemId
      * @return {!Array<cast.framework.QueueItem>}
      */
    prevItems(referenceItemId) {
      return this.constructQueueList_(YourServer.getPrevMedias(referenceItemId));
    }

    /**
      * Constructs a list of QueueItems based on the media information containing
      * the item id and the media url.
      * @param {number} referenceItemId
      * @return {!Array<cast.framework.QueueItem>}
      */
    constructQueueList_(medias) {
      const items = [];
      for (media of medias) {
        const item = new cast.framework.messages.QueueItem(media.itemId);
        item.media = new cast.framework.messages.MediaInformation();
        item.media.contentId = media.url;
        items.push(item);
      }
      return items;
    }

    /**
      * Logs the currently playing item.
      * @param {number} itemId The unique id for the item.
      * @export
      */
    onCurrentItemIdChanged(itemId) {
      console.log('We are now playing video ' + itemId);
      YourServer.trackUsage(itemId);
    }
  };


context.start({queue: new DemoQueue()});

    </script>
  </body>
  </html>