<html>
  <head>
  </head>
  <body>
      <cast-media-player id="player"></cast-media-player>
      <style>
        #player {
            --theme-hue: 210;
            --progress-color: rgb(0, 255, 0);
            --splash-image: url('splash.JPG');
            --background-image: url('splash.JPG');
            --logo-image: url('splash.JPG');
            --watermark-image: url('splash.JPG');
            --spinner-image: url('splash.JPG');
            --buffering-image: url('splash.JPG');
            --pause-image: url('splash.JPG');
            --play-image: url('splash.JPG');
            --break-color:	rgb(255, 0, 0);
        }
      </style>
          <script type="text/javascript"
          src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js">
    </script>
    <script>

      const context = cast.framework.CastReceiverContext.getInstance();
      const playerManager = context.getPlayerManager();
      const playbackConfig = new cast.framework.PlaybackConfig();
      // let myQueue = new DemoQueue();

        // listen to all Core Events
        playerManager.addEventListener(cast.framework.events.category.CORE,
        event => {
            console.log("EVENT: "+event);
        });

        playerManager.setMessageInterceptor(
          cast.framework.messages.MessageType.LOAD,
          request => {
            console.log('LOAD MESS REQUEST MEDIA CONTENTID: '+request.media.contentId);
            return request;
          }
        );
        playerManager.setMessageInterceptor(
          cast.framework.messages.MessageType.QUEUE_LOAD,
          request => {
            console.log('QUEUE LOAD REQUEST ITEMS: ', request.items);
            return request;
          }
        );

      playerManager.addEventListener(
        cast.framework.events.EventType.PLAYER_LOAD_COMPLETE, () => {
        const audioTracksManager = playerManager.getAudioTracksManager();
        const textTracksManager = playerManager.getTextTracksManager();

        // Get all audio tracks
        const audioTracks = audioTracksManager.getTracks();

        // Get all text tracks
        const textTracks = textTracksManager.getTracks();

        // Choose the first audio track to be active by specifying its ID
        console.log("AUDIO TRACK tracks[0].trackId"+audioTracks[0].trackId);
        audioTracksManager.setActiveById(audioTracks[0].trackId);

        // Choose the first text track to be active by its ID
        console.log("TEXT TRACK tracks[0].trackId"+textTracks[0].trackId);
        textTracksManager.setActiveByIds([textTracks[0].trackId]);
      });


      // Sets the player to start playback as soon as there are five seconds of
      // media contents buffered. Default is 10.
      playbackConfig.autoResumeDuration = 5;

      // Creates a simple queue with a combination of contents.
      const DemoQueue = class extends cast.framework.QueueBase {
      constructor() {
        super();

          /** @private @const {!cast.framework.QueueManager} */
          this.queueManager_ = context.getPlayerManager().getQueueManager();

          /**
            * List of media urls.
            * @private @const {!Array<string>}
          */
        this.myMediaUrls_ = ['https://commondatastorage.googleapis.com/gtv-videos-bucket/CastVideos/hls/DesigningForGoogleCast.m3u8',
 'https://commondatastorage.googleapis.com/gtv-videos-bucket/CastVideos/hls/GoogleIO-2014-CastingToTheFuture.m3u8',
 'https://commondatastorage.googleapis.com/gtv-videos-bucket/CastVideos/hls/GoogleIO-2014-MakingGoogleCastReadyAppsDiscoverable.m3u8',
 'https://commondatastorage.googleapis.com/gtv-videos-bucket/CastVideos/hls/BigBuckBunny.m3u8',
 'https://commondatastorage.googleapis.com/gtv-videos-bucket/CastVideos/hls/ElephantsDream.m3u8'];

      }
      /**
        * Provide a list of items.
        * @param {!cast.framework.messages.LoadRequestData} loadRequestData
        * @return {!cast.framework.messages.QueueData}
        */
      initialize(loadRequestData) {
        const items = [];
        for (const mediaUrl of this.myMediaUrls_) {
          const item = new cast.framework.messages.QueueItem();
          item.media = new cast.framework.messages.MediaInformation();
          item.media.contentId = mediaUrl;
          items.push(item);
        }
        const queueData = loadRequestData.queueData || new cast.framework.messages.QueueData();
        queueData.name = 'Your Queue Name';
        queueData.description = 'Your Queue Description';
        queueData.items = items;
        // Start with the first item in the playlist.
        queueData.startIndex = 0;
        // Start from 10 seconds into the first item.
        queueData.currentTime = 10;
        return queueData;
        }

        /** Inserts items to the queue. */
        onSomeEventTriggeringInsertionToQueue() {
          const twoMoreUrls = ['https://commondatastorage.googleapis.com/gtv-videos-bucket/CastVideos/hls/BigBuckBunny.m3u8',
 'https://commondatastorage.googleapis.com/gtv-videos-bucket/CastVideos/hls/ElephantsDream.m3u8'];
          const items = [];
          for (const mediaUrl of twoMoreUrls) {
            const item = new cast.framework.QueueItem();
            item.media = new cast.framework.messages.MediaInformation();
            item.media.contentId = mediaUrl;
            items.push(item);
          }
          // Insert two more items after the current playing item.
          const allItems = this.queueManager_.getItems();
          const currentItem = this.queueManager_.getCurrentItem();
          const nextItemIndex = allItems.indexOf(currentItem) + 1;
          const insertBefore = (nextItemIndex < allItems.length) ?
              allItems[nextItemIndex].itemId :
              undefined;
          this.queueManager_.insertItems(items, insertBefore);
        }

        /** Removes a particular item from the queue. */
        onSomeEventTriggeringRemovalFromQueue() {
          this.queueManager_.removeItems([2]);
        }

        /** Get current item from the queue. */
        getCurrentItemInQueue() {
          const item = this.queueManager_.getCurrentItem();
          return item;
        }

        /** Get current item from the queue. */
        getNrOfItemsInQueue() {
          const items = this.queueManager_.getItems();
          return items.length;
        }
        

      };

      context.start({playbackConfig: playbackConfig, queue: new DemoQueue()});
      // context.start({playbackConfig: playbackConfig, queue: myQueue});

    </script>
  </body>
  </html>